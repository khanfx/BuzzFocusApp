{"version":3,"file":"appBundle.js","sourceRoot":"","sources":["../../scripts/BuzzFocusProcess.ts","../../scripts/index.ts"],"names":[],"mappings":"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","sourcesContent":["module BuzzFocusApp {\r\n    \"use strict\";\r\n\r\n    const BUZZ = 300;\r\n\r\n    export class BuzzFocusProcess {\r\n\r\n        private _timeoutX: number;\r\n        private _timeoutF: number;\r\n        private _log: Element;\r\n\r\n        public constructor(el: Element) {\r\n\r\n            this._log = el.querySelector('#Log');\r\n\r\n            var start = el.querySelector('#Start');\r\n            start.addEventListener('click', e => {\r\n                this.stop();\r\n                this.setupNextBuzz();\r\n                this.setupFinal();\r\n            });\r\n\r\n            var stop = el.querySelector('#Stop');\r\n            stop.addEventListener('click', e => {\r\n                this.stop(true);\r\n            });\r\n\r\n        }\r\n        \r\n        private setupNextBuzz() {\r\n            var [timeout, length] = this.pickTimeout();\r\n            switch (length) {\r\n                case 'long':\r\n                    navigator.vibrate([BUZZ, BUZZ]);\r\n                    break;\r\n                default:\r\n                    navigator.vibrate(BUZZ);\r\n            }\r\n            this._timeoutX = window.setTimeout(() => {\r\n                this._timeoutX = 0;\r\n                this.setupNextBuzz();\r\n            }, timeout);\r\n        }\r\n\r\n        private pickTimeout() {\r\n            var timeout0 = 1000 * 60;\r\n            var timeout = timeout0;\r\n            var x = Math.round(Math.random() * 10);\r\n\r\n            var length = 'normal';\r\n            if (x < 3)\r\n                length = 'short'\r\n            else if (x > 9)\r\n                length = 'long';\r\n\r\n            switch (length) {\r\n                case 'short':\r\n                    timeout = timeout0 / 2;\r\n                    break;\r\n                case 'long':\r\n                    timeout = timeout0 * 2;\r\n                    break;\r\n                case 'normal':\r\n                default:\r\n                    break;\r\n            }\r\n            var swingFraction = 1 / 3;\r\n            timeout += (swingFraction * timeout) - Math.random() * swingFraction * 2 * timeout;\r\n            console.log('Setting timeout %i, %s', timeout, length);\r\n            this.log(`Waiting ${(timeout / 1000).toFixed(0)}s...`);\r\n            return [timeout, length];\r\n        }\r\n\r\n        private setupFinal() {\r\n            var TOTAL_INTERVAL = 1000 * 60 * 5;\r\n            this._timeoutF = window.setTimeout(() => {\r\n                this.stop(true);\r\n            }, TOTAL_INTERVAL);\r\n        }\r\n\r\n        private stop(buzz: boolean = false) {\r\n            window.clearTimeout(this._timeoutX);\r\n            window.clearTimeout(this._timeoutF);\r\n            this._timeoutX = 0;\r\n            this._timeoutF = 0;\r\n            if (buzz)\r\n                navigator.vibrate([BUZZ, BUZZ, BUZZ]);\r\n        }\r\n\r\n        private log(s: string) {\r\n            this._log.textContent += '\\r\\n' + s;\r\n        }\r\n    }\r\n}\r\n","// For an introduction to the Blank template, see the following documentation:\r\n// http://go.microsoft.com/fwlink/?LinkID=397705\r\n// To debug code on page load in Ripple or on Android devices/emulators: launch your app, set breakpoints, \r\n// and then run \"window.location.reload()\" in the JavaScript Console.\r\nmodule BuzzFocusApp {\r\n    \"use strict\";\r\n\r\n    export module Application {\r\n        export function initialize() {\r\n            document.addEventListener('deviceready', onDeviceReady, false);\r\n        }\r\n\r\n        function onDeviceReady() {\r\n            // Handle the Cordova pause and resume events\r\n            document.addEventListener('pause', onPause, false);\r\n            document.addEventListener('resume', onResume, false);\r\n\r\n            // TODO: Cordova has been loaded. Perform any initialization that requires Cordova here.\r\n            var parentElement = document.getElementById('deviceready');\r\n            var listeningElement = parentElement.querySelector('.listening');\r\n            var receivedElement = parentElement.querySelector('.received');\r\n            listeningElement.setAttribute('style', 'display:none;');\r\n            receivedElement.setAttribute('style', 'display:block;');\r\n\r\n            new BuzzFocusProcess(document.querySelector('#BuzzFocusProcess'));\r\n        }\r\n\r\n        function onPause() {\r\n            // TODO: This application has been suspended. Save application state here.\r\n        }\r\n\r\n        function onResume() {\r\n            // TODO: This application has been reactivated. Restore application state here.\r\n        }\r\n\r\n    }\r\n\r\n    window.onload = function () {\r\n        Application.initialize();\r\n    }\r\n}\r\n"]}